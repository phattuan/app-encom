{"ast":null,"code":"import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getAdminProducts,deleteProduct,clearErrors}from'../../actions/productActions';import{DELETE_PRODUCT_RESET}from'../../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductsList=function ProductsList(_ref){var history=_ref.history;var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.products;}),loading=_useSelector.loading,error=_useSelector.error,products=_useSelector.products;var _useSelector2=useSelector(function(state){return state.product;}),deleteError=_useSelector2.error,isDeleted=_useSelector2.isDeleted;useEffect(function(){dispatch(getAdminProducts());if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(isDeleted){alert.success('Product deleted successfully');history.push('/admin/products');dispatch({type:DELETE_PRODUCT_RESET});}},[dispatch,alert,error,deleteError,isDeleted,history]);var setProducts=function setProducts(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Tên sản phẩm',field:'name',sort:'asc'},{label:'Giá',field:'price',sort:'asc'},{label:'Số lượng còn lại',field:'stock',sort:'asc'},{label:'Hành động',field:'actions'}],rows:[]};products.forEach(function(product){data.rows.push({id:product._id,name:product.name,price:\"\".concat(product.price.toLocaleString(),\" VN\\u0110\"),stock:product.stock,actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/product/\".concat(product._id),className:\"btn btn-primary py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger py-1 px-2 ml-2\",\"data-toggle\":\"modal\",\"data-target\":\"#exampleModal\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:\"exampleModal\",tabIndex:-1,role:\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",role:\"document\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",id:\"exampleModalLabel\",children:\"Th\\xF4ng b\\xE1o!\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"modal-body\",children:\"B\\u1EA1n c\\xF3 mu\\u1ED1n x\\xF3a kh\\xF4ng\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",\"data-dismiss\":\"modal\",children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:function onClick(){return deleteProductHandler(product._id);},\"data-dismiss\":\"modal\",children:\"X\\xF3a\"})]})]})})})})]})});});return data;};var deleteProductHandler=function deleteProductHandler(id){dispatch(deleteProduct(id));};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Tất cả sản phẩm'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"T\\u1EA5t c\\u1EA3 s\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/product\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",children:\"Th\\xEAm s\\u1EA3n ph\\u1EA9m m\\u1EDBi\"})}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setProducts(),className:\"px-3\",bordered:true,striped:true,hover:true})]})})]})]});};export default ProductsList;","map":{"version":3,"names":["React","Fragment","useEffect","Link","MDBDataTable","MetaData","Loader","Sidebar","useAlert","useDispatch","useSelector","getAdminProducts","deleteProduct","clearErrors","DELETE_PRODUCT_RESET","jsx","_jsx","jsxs","_jsxs","ProductsList","_ref","history","alert","dispatch","_useSelector","state","products","loading","error","_useSelector2","product","deleteError","isDeleted","success","push","type","setProducts","data","columns","label","field","sort","rows","forEach","id","_id","name","price","concat","toLocaleString","stock","actions","children","to","className","tabIndex","role","class","onClick","deleteProductHandler","title","bordered","striped","hover"],"sources":["C:/Users/ASUS/Desktop/project/encom-tp-app/frontend/src/components/admin/ProductsList.js"],"sourcesContent":["import React, { Fragment, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { MDBDataTable } from 'mdbreact'\n\nimport MetaData from '../layout/MetaData'\nimport Loader from '../layout/Loader'\nimport Sidebar from './Sidebar'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { getAdminProducts, deleteProduct, clearErrors } from '../../actions/productActions'\nimport { DELETE_PRODUCT_RESET } from '../../constants/productConstants'\n\nconst ProductsList = ({ history }) => {\n\n    const alert = useAlert();\n    const dispatch = useDispatch();\n\n    const { loading, error, products } = useSelector(state => state.products);\n    const { error: deleteError, isDeleted } = useSelector(state => state.product)\n\n    useEffect(() => {\n        dispatch(getAdminProducts());\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors())\n        }\n\n        if (deleteError) {\n            alert.error(deleteError);\n            dispatch(clearErrors())\n        }\n\n        if (isDeleted) {\n            alert.success('Product deleted successfully');\n            history.push('/admin/products');\n            dispatch({ type: DELETE_PRODUCT_RESET })\n        }\n\n    }, [dispatch, alert, error, deleteError, isDeleted, history])\n\n    const setProducts = () => {\n        const data = {\n            columns: [\n                {\n                    label: 'ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Tên sản phẩm',\n                    field: 'name',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Giá',\n                    field: 'price',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Số lượng còn lại',\n                    field: 'stock',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Hành động',\n                    field: 'actions',\n                },\n            ],\n            rows: []\n        }\n\n        products.forEach(product => {\n            data.rows.push({\n                id: product._id,\n                name: product.name,\n                price: `${(product.price).toLocaleString()} VNĐ`,\n                stock: product.stock,\n                actions: <Fragment>\n                    <Link to={`/admin/product/${product._id}`} className=\"btn btn-primary py-1 px-2\">\n                        <i className=\"fa fa-pencil\"></i>\n                    </Link>\n                    <button className=\"btn btn-danger py-1 px-2 ml-2\" data-toggle=\"modal\" data-target=\"#exampleModal\" >\n                        <i className=\"fa fa-trash\"></i>\n                    </button>\n                    {/* model delete */}\n                    <div>\n                        <div className=\"modal fade\" id=\"exampleModal\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                            <div className=\"modal-dialog\" role=\"document\">\n                                <div className=\"modal-content\">\n                                    <div className=\"modal-header\">\n                                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">Thông báo!</h5>\n                                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                            <span aria-hidden=\"true\">×</span>\n                                        </button>\n                                    </div>\n                                    <div class=\"modal-body\">\n                                        Bạn có muốn xóa không\n                                    </div>\n                                    <div className=\"modal-footer\">\n                                        <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Hủy</button>\n                                        <button type=\"button\" className=\"btn btn-danger\" onClick={() => deleteProductHandler(product._id)} data-dismiss=\"modal\">Xóa</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </Fragment>\n            })\n        })\n\n        return data;\n    }\n\n    const deleteProductHandler = (id) => {\n        dispatch(deleteProduct(id))\n    }\n\n    return (\n        <Fragment>\n            <MetaData title={'Tất cả sản phẩm'} />\n\n            <div className=\"row\">\n                <div className=\"col-12 col-md-2\">\n                    <Sidebar />\n                </div>\n\n                <div className=\"col-12 col-md-10\">\n                    <Fragment>\n                        <h1 className=\"my-5\">Tất cả sản phẩm</h1>\n                        <Link to='/admin/product'><button type=\"button\" className=\"btn btn-primary\">Thêm sản phẩm mới</button></Link>\n\n                        {loading ? <Loader /> : (\n                            <MDBDataTable\n                                data={setProducts()}\n                                className=\"px-3\"\n                                bordered\n                                striped\n                                hover\n                            />\n                        )}\n\n                    </Fragment>\n                </div>\n            </div>\n\n        </Fragment>\n    )\n}\n\nexport default ProductsList\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}