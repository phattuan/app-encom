{"ast":null,"code":"import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{allUsers,clearErrors}from'../../actions/userActions';import{DELETE_USER_RESET}from'../../constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UsersList=function UsersList(_ref){var history=_ref.history;var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.allUsers;}),loading=_useSelector.loading,error=_useSelector.error,users=_useSelector.users;var _useSelector2=useSelector(function(state){return state.user;}),isDeleted=_useSelector2.isDeleted;useEffect(function(){dispatch(allUsers());if(error){alert.error(error);dispatch(clearErrors());}if(isDeleted){alert.success('User deleted successfully');history.push('/admin/users');dispatch({type:DELETE_USER_RESET});}},[dispatch,alert,error,isDeleted,history]);var setUsers=function setUsers(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Tên người dùng',field:'name',sort:'asc'},{label:'Email',field:'email',sort:'asc'},{label:'Quyền',field:'role',sort:'asc'},{label:'Trạng thái tài khoản    ',field:'status',sort:'asc'},{label:'Hành động',field:'actions'}],rows:[]};users.forEach(function(userr){var hoat_dong='';if(userr.role===\"look\"){userr.role=\"Đã bị khóa\";}if(userr.role===\"user\"){userr.role=\"Người dùng\";}if(userr.role===\"admin\"){userr.role=\"Quản trị\";}if(userr.role===\"Người dùng\"||\"Quản trị\"){hoat_dong=\"Hoạt động\";}data.rows.push({id:userr._id,name:userr.name,email:userr.email,role:userr.role,status:userr.role&&String(userr.role).includes('Đã bị khóa')?/*#__PURE__*/_jsxs(\"p\",{style:{color:'red'},children:[/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-key-fill\"}),\" \",userr.role]}):/*#__PURE__*/_jsxs(\"p\",{style:{color:'green'},children:[/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-activity\"}),\" \",hoat_dong]}),actions:/*#__PURE__*/_jsxs(Fragment,{children:[\"\\u2003\",/*#__PURE__*/_jsx(Link,{to:\"/admin/user/\".concat(userr._id),className:\"btn btn-primary py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),\"\\u2003\",/*#__PURE__*/_jsx(Link,{to:\"/admin/look_user/\".concat(userr._id),className:\"btn btn-danger py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-key-fill\"})})]})});});return data;};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'All Users'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"T\\u1EA5t c\\u1EA3 ng\\u01B0\\u1EDDi d\\xF9ng\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setUsers(),className:\"px-3\",bordered:true,striped:true,hover:true})]})})]})]});};export default UsersList;","map":{"version":3,"names":["React","Fragment","useEffect","Link","MDBDataTable","MetaData","Loader","Sidebar","useAlert","useDispatch","useSelector","allUsers","clearErrors","DELETE_USER_RESET","jsx","_jsx","jsxs","_jsxs","UsersList","_ref","history","alert","dispatch","_useSelector","state","loading","error","users","_useSelector2","user","isDeleted","success","push","type","setUsers","data","columns","label","field","sort","rows","forEach","userr","hoat_dong","role","id","_id","name","email","status","String","includes","style","color","children","class","actions","to","concat","className","title","bordered","striped","hover"],"sources":["C:/Users/ASUS/Desktop/project/encom-tp-app/frontend/src/components/admin/UsersList.js"],"sourcesContent":["import React, { Fragment, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { MDBDataTable } from 'mdbreact'\n\nimport MetaData from '../layout/MetaData'\nimport Loader from '../layout/Loader'\nimport Sidebar from './Sidebar'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { allUsers, clearErrors } from '../../actions/userActions'\nimport { DELETE_USER_RESET } from '../../constants/userConstants'\n\nconst UsersList = ({ history }) => {\n\n    const alert = useAlert();\n    const dispatch = useDispatch();\n\n    const { loading, error, users } = useSelector(state => state.allUsers);\n    const { isDeleted } = useSelector(state => state.user)\n\n    useEffect(() => {\n        dispatch(allUsers());\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors())\n        }\n\n        if (isDeleted) {\n            alert.success('User deleted successfully');\n            history.push('/admin/users');\n            dispatch({ type: DELETE_USER_RESET })\n        }\n\n    }, [dispatch, alert, error, isDeleted, history])\n\n\n    const setUsers = () => {\n        const data = {\n            columns: [\n                {\n                    label: 'ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Tên người dùng',\n                    field: 'name',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Email',\n                    field: 'email',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Quyền',\n                    field: 'role',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Trạng thái tài khoản    ',\n                    field: 'status',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Hành động',\n                    field: 'actions',\n                },\n            ],\n            rows: []\n        }\n\n        users.forEach(userr => {\n            let hoat_dong = '';\n            if (userr.role === \"look\") {\n                userr.role = \"Đã bị khóa\"\n            }\n            if (userr.role === \"user\") {\n                userr.role = \"Người dùng\"\n            }\n            if (userr.role === \"admin\") {\n                userr.role = \"Quản trị\"\n            }\n            if (userr.role === \"Người dùng\" || \"Quản trị\") {\n                hoat_dong = \"Hoạt động\"\n            }\n\n            data.rows.push({\n                id: userr._id,\n                name: userr.name,\n                email: userr.email,\n                role: userr.role,\n                status: userr.role && String(userr.role).includes('Đã bị khóa')\n                    ? <p style={{ color: 'red' }}><i class=\"bi bi-key-fill\"></i> {userr.role}</p>\n                    : <p style={{ color: 'green' }}><i class=\"bi bi-activity\"></i> {hoat_dong}</p>,\n                actions: <Fragment>\n                    &emsp;\n                    <Link to={`/admin/user/${userr._id}`} className=\"btn btn-primary py-1 px-2\">\n                        <i className=\"fa fa-pencil\"></i>\n                    </Link>&emsp;\n                    <Link to={`/admin/look_user/${userr._id}`} className=\"btn btn-danger py-1 px-2\">\n                        <i class=\"bi bi-key-fill\"></i>\n                    </Link>\n\n                </Fragment>\n            })\n        })\n\n        return data;\n    }\n\n\n    return (\n        <Fragment>\n            <MetaData title={'All Users'} />\n            <div className=\"row\">\n                <div className=\"col-12 col-md-2\">\n                    <Sidebar />\n                </div>\n\n                <div className=\"col-12 col-md-10\">\n                    <Fragment>\n                        <h1 className=\"my-5\">Tất cả người dùng</h1>\n\n                        {loading ? <Loader /> : (\n                            <MDBDataTable\n                                data={setUsers()}\n                                className=\"px-3\"\n                                bordered\n                                striped\n                                hover\n                            />\n                        )}\n\n                    </Fragment>\n                </div>\n            </div>\n\n        </Fragment>\n    )\n}\n\nexport default UsersList\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}